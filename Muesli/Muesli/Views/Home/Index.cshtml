@model IEnumerable<Muesli.Models.Ingredient>

@{
    ViewBag.Title = "Home Page";
}
<div>
    <h1>Muesli madness</h1>
</div>
@using (Html.BeginForm("Index", "Cart"))
{
    @Html.Hidden("returnUrl", Request.Url.PathAndQuery)
    <input type="submit" class="btn btn-success" value="View Cart" />
}
<h2>
    Customize your muesli
</h2>
<p>
    Choose your custom ingredients:
</p>
<div class="thecontent">
    <div class="ingredients ingredient-base">
        <div class='toggleHolder'>
            <div class='toggler'>
                <h5>Base ingredient</h5>
            </div>
            <div class='toggler' style='display:none;'>
                <h5>Base ingredient</h5>
            </div>
        </div>
        <div class='wrapper wrapper-base' style='display:none;'>
            @*<div class='wrapper wrapper-base'>*@
            @using (Html.BeginForm("AddToCart", "Cart"))
            {
                @Html.DropDownList("Ingredients1")
                <div class="selected selected-base" style="display:none;">
                    <input name="quantity" id="quantity" type="range" min="5" max="800" value="5" /><br />
                    <span>
                        Selected:
                        <span></span>
                        grams
                    </span><br />
                    @Html.Hidden("IngredientId" )@*IEnumerable<Muesli.Models.Ingredient.IngredientId>)*@
                    @Html.Hidden("returnUrl", Request.Url.PathAndQuery)
                    <input type="submit" class="btn btn-success" value="Add to cart" />
                </div>
            }
            @*</div>*@
        </div>
    </div>
    <div class="ingredients ingredient-fruits">
        <div class='toggleHolder'>
            <div class='toggler'>
                <h5>Fruits</h5>
            </div>
            <div class='toggler' style='display:none;'>
                <h5>Fruits</h5>
            </div>
        </div>
        <div class='wrapper wrapper-fruits' style='display:none;'>
            @*<div class='wrapper wrapper-fruits'>*@
            @using (Html.BeginForm("AddToCart2", "Cart"))
            {
                @Html.DropDownList("Ingredients2")
                <div class="selected selected-fruits" style="display:none;">
                    <input name="quantity" id="quantity" type="range" min="5" max="500" value="5" /><br />
                    <span>
                        Selected:
                        <span></span>
                        grams
                    </span><br />
                    @Html.Hidden("IngredientId")
                    @Html.Hidden("returnUrl", Request.Url.PathAndQuery)
                    <input type="submit" class="btn btn-success" value="Add to cart" />
                </div>
            }
            @*</div>*@
        </div>
    </div>

    <div class="ingredients ingredient-nuts">
        <div class='toggleHolder'>
            <div class='toggler'>
                <h5>Nuts</h5>
            </div>
            <div class='toggler' style='display:none;'>
                <h5>Nuts</h5>
            </div>
        </div>
        <div class='wrapper wrapper-nuts' style='display:none;'>
            @*<div class='wrapper wrapper-nuts'>*@
            @using (Html.BeginForm("AddToCart3", "Cart"))
            {
                @Html.DropDownList("Ingredients3")
                <div class="selected selected-nuts" style="display:none;">
                    <input name="quantity" id="quantity" type="range" min="5" max="250" value="5" /><br />
                    <span>
                        Selected:
                        <span></span>
                        grams
                    </span><br />
                    @Html.Hidden("IngredientId")
                    @Html.Hidden("returnUrl", Request.Url.PathAndQuery)
                    <input type="submit" class="btn btn-success" value="Add to cart" />

                </div>
            }
            @*</div>*@
        </div>
    </div>
    <div class="ingredients ingredient-seeds">
        <div class='toggleHolder'>
            <div class='toggler'>
                <h5>Seeds</h5>
            </div>
            <div class='toggler' style='display:none;'>
                <h5>Seeds</h5>
            </div>
        </div>
        <div class='wrapper wrapper-seeds' style='display:none;'>
            @*<div class='wrapper wrapper-seeds'>*@
            @using (Html.BeginForm("AddToCart4", "Cart"))
            {
                @Html.DropDownList("Ingredients4")
                <div class="selected selected-seeds" style="display:none;">
                    <input name="quantity" id="quantity" type="range" min="5" max="100" value="5" /><br />
                    <span>
                        Selected:
                        <span></span>
                        grams
                    </span><br />

                    @Html.Hidden("IngredientId")
                    @Html.Hidden("returnUrl", Request.Url.PathAndQuery)
                    <input type="submit" class="btn btn-success" value="Add to cart" />

                </div>
            }
            @*</div>*@
        </div>
    </div>
    <div class="ingredients ingredient-others">
        <div class='toggleHolder'>
            <div class='toggler'>
                <h5>Others</h5>
            </div>
            <div class='toggler' style='display:none;'>
                <h5>Others</h5>
            </div>
        </div>
        <div class='wrapper wrapper-others' style='display:none;'>
            @*<div class='wrapper wrapper-others'>*@
            @using (Html.BeginForm("AddToCart5", "Cart"))
            {
                @Html.DropDownList("Ingredients5")
                <div class="selected selected-others" style="display:none;">
                    <input name="quantity" id="quantity" type="range" min="5" max="100" value="5" /><br />
                    <span>
                        Selected:
                        <span></span>
                        grams
                    </span><br />
                    @Html.Hidden("IngredientId")
                    @Html.Hidden("returnUrl", Request.Url.PathAndQuery)
                    <input type="submit" class="btn btn-success" value="Add to cart" />

                </div>
            }
            @*</div>*@
        </div>
    </div>
</div>

<script>

    $(document).ready(function () {
        $('.toggler').on('click', function () {
            $(this).parent().children().toggle(); //swaps the display:none between the two spans
            $(this).parent().parent().find('.wrapper').slideToggle();
            //swap the display of the main content with slide action
        });

        $('select').on('change', function () {
            if ($(this).val() != "null") {
                $(this).parent().find('.selected').hide();
                $(this).parent().children().find('input:first').val(5);
                $(this).parent().children().children("span").children("span").text(5);
                $(this).parent().find('.selected').show();
            } else {
                $(this).parent().find('.selected').hide();
            }
        })

        $('input').on('input', function () {
            $(this).parent().children("span").children("span").text($(this).val());
        });


    });
</script>
